# 2025-08-22 Work Session

## Context

- Project: [[AreYouJ]]
- Focus Area: Multi-Agent System Architecture Planning
- Analysis Target: Omnara vs AreYouJ Comparison and Migration Plan
- Previous Session: Initial planning session

## Work Completed

### Multi-Agent System Architecture Analysis

í”„ë¡œì íŠ¸ë¥¼ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œìœ¼ë¡œ í™•ì¥í•˜ê¸° ìœ„í•œ ì²´ê³„ì  ë¶„ì„ ìˆ˜í–‰

#### Current AreYouJ Architecture Analysis
- Files analyzed: `src/App.tsx`, `server/index.js`, `claude_pty_wrapper.py`
- **Single Terminal Limitation**: í˜„ì¬ í•˜ë‚˜ì˜ í„°ë¯¸ë„ ì„¸ì…˜ë§Œ ì§€ì›
- **Sequential Processing**: ìˆœì°¨ì ì¸ ë©”ì‹œì§€ ì²˜ë¦¬ë§Œ ê°€ëŠ¥
- **Single Project Path**: í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ ê²½ë¡œë§Œ ì„¤ì • ê°€ëŠ¥

#### Omnara Reference Analysis
- **Multi-Agent Core Models**: User, UserAgent, AgentInstance, Message, APIKey
- **Independent Execution**: ì—ì´ì „íŠ¸ë³„ ë…ë¦½ì ì¸ ì‹¤í–‰ í™˜ê²½
- **Real-time Streaming**: Server-Sent Events ê¸°ë°˜ ì‹¤ì‹œê°„ í†µì‹ 
- **State Management**: ACTIVE, AWAITING_INPUT, COMPLETED ìƒíƒœ ê´€ë¦¬

## Technical Decisions

### ğŸš¨ Critical Architecture Decision: Database Separation

- **Choice**: **ë°ì´í„°ë² ì´ìŠ¤ ë„ë©”ì¸ ë¶„ë¦¬** - `tasks.db` + `agents.db`
- **Reasoning**:
  - **Single Responsibility**: tasks.dbëŠ” ì—…ë¬´ ëª©ë¡ë§Œ, agents.dbëŠ” ì—ì´ì „íŠ¸ ê´€ë¦¬ë§Œ
  - **Domain Isolation**: ì„œë¡œ ë‹¤ë¥¸ ë„ë©”ì¸ì˜ ëª…í™•í•œ ë¶„ë¦¬
  - **Maintainability**: ê° ë„ë©”ì¸ë³„ë¡œ ë…ë¦½ì ì¸ ìŠ¤í‚¤ë§ˆ ì§„í™” ê°€ëŠ¥
  - **Stability**: ê¸°ì¡´ tasks.db êµ¬ì¡° ì™„ì „ ë³´ì¡´
- **Previous Mistake**: tasks.dbì— agents/agent_instances í…Œì´ë¸” ì¶”ê°€ ê³„íš (ì˜ëª»ëœ ì„¤ê³„)
- **Impact**: ê¹”ë”í•œ ì•„í‚¤í…ì²˜, í–¥í›„ í™•ì¥ì„± í™•ë³´, ì½”ë“œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

### Multi-Agent Architecture Strategy

- **Choice**: Omnara ë ˆí¼ëŸ°ìŠ¤ ê¸°ë°˜ ì ì§„ì  í™•ì¥
- **Reasoning**:
  - **UserAgent**: ì‚¬ìš©ì ì •ì˜ ì—ì´ì „íŠ¸ íƒ€ì… (ì´ë¦„, í”„ë¡œì íŠ¸ ê²½ë¡œ, ì„¤ì •)
  - **AgentInstance**: ê° ì—ì´ì „íŠ¸ì˜ ì‹¤í–‰ ì¸ìŠ¤í„´ìŠ¤ (ìƒíƒœ, ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬) 
  - **ë…ë¦½ ì„¸ì…˜**: ì—ì´ì „íŠ¸ë³„ ë…ë¦½ì ì¸ PTY í”„ë¡œì„¸ìŠ¤
- **Alternatives Considered**: ì™„ì „ ì¬ì‘ì„± vs ì ì§„ì  í™•ì¥
- **Impact**: ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ í™œìš©í•˜ë©´ì„œ Multi-Agent ê¸°ëŠ¥ ì¶”ê°€

### Database Schema Evolution Strategy

- **Choice**: SQLite ìœ ì§€ + **ì´ì¤‘ ë°ì´í„°ë² ì´ìŠ¤** ë°©ì‹
- **Reasoning**: 
  - ë¡œì»¬ ê°œë°œ í™˜ê²½ì— ì í•©í•œ ê²½ëŸ‰ ì†”ë£¨ì…˜
  - **ë„ë©”ì¸ë³„ ë¶„ë¦¬**: tasks.db (ì—…ë¬´) + agents.db (ì—ì´ì „íŠ¸)
  - PostgreSQL ëŒ€ë¹„ ì„¤ì • ë³µì¡ë„ ìµœì†Œí™”
- **Alternatives Considered**: PostgreSQL ì „í™˜, NoSQL ì†”ë£¨ì…˜, ë‹¨ì¼ DB í™•ì¥
- **Impact**: ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬, í–¥í›„ ê° ë„ë©”ì¸ë³„ ë…ë¦½ í™•ì¥ ê°€ëŠ¥

### Session Management Architecture

- **Choice**: PTY í”„ë¡œì„¸ìŠ¤ë³„ ë…ë¦½ ì„¸ì…˜ ê´€ë¦¬
- **Reasoning**: 
  - ì—ì´ì „íŠ¸ê°„ ì™„ì „í•œ ê²©ë¦¬ ë³´ì¥
  - ë™ì‹œ ì‹¤í–‰ ì‹œ ì¶©ëŒ ë°©ì§€
  - ê° ì—ì´ì „íŠ¸ì˜ ë…ë¦½ì ì¸ í™˜ê²½ ìƒíƒœ ìœ ì§€
- **Impact**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€, ê´€ë¦¬ ë³µì¡ë„ ìƒìŠ¹

## Implementation Plan

### Phase 1: Database Extension with Separation (Priority 1)

#### ğŸ†• ìƒˆë¡œìš´ `agents.db` ìƒì„±
```sql
-- agents.db - ì—ì´ì „íŠ¸ ì •ì˜
CREATE TABLE agents (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL UNIQUE,
  project_path TEXT NOT NULL,
  description TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ì—ì´ì „íŠ¸ ì‹¤í–‰ ì¸ìŠ¤í„´ìŠ¤
CREATE TABLE agent_instances (
  id TEXT PRIMARY KEY,
  agent_id TEXT REFERENCES agents(id) ON DELETE CASCADE,
  status TEXT DEFAULT 'idle', -- idle, active, completed, error, terminated
  started_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  completed_at DATETIME NULL,
  pty_session_id TEXT NULL,
  project_path TEXT NOT NULL,
  last_activity_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ì—ì´ì „íŠ¸-ì‚¬ìš©ì ê°„ ë©”ì‹œì§€  
CREATE TABLE agent_messages (
  id TEXT PRIMARY KEY,
  agent_instance_id TEXT REFERENCES agent_instances(id) ON DELETE CASCADE,
  sender_type TEXT NOT NULL, -- 'user' or 'agent'
  content TEXT NOT NULL,
  requires_user_input BOOLEAN DEFAULT FALSE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- ì—ì´ì „íŠ¸ë³„ ì„¤ì • (í–¥í›„ í™•ì¥ìš©)
CREATE TABLE agent_settings (
  agent_id TEXT PRIMARY KEY REFERENCES agents(id) ON DELETE CASCADE,
  auto_start BOOLEAN DEFAULT FALSE,
  notification_enabled BOOLEAN DEFAULT TRUE,
  max_concurrent_instances INTEGER DEFAULT 1,
  settings_json TEXT DEFAULT '{}'
);
```

#### ğŸ”„ ê¸°ì¡´ `tasks.db` ë³´ì¡´
```sql
-- tasks.dbëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ (ë³€ê²½ ì—†ìŒ)
CREATE TABLE tasks (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title TEXT NOT NULL,
  description TEXT,
  status TEXT DEFAULT 'pending',
  priority TEXT DEFAULT 'medium',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

### Phase 2: Backend API Enhancement with Dual Database
#### ğŸ“ íŒŒì¼ êµ¬ì¡° ë³€ê²½
```
server/
â”œâ”€â”€ db/
â”‚   â”œâ”€â”€ sqlite.js           # ê¸°ì¡´: tasks.db ê´€ë¦¬
â”‚   â””â”€â”€ agents-sqlite.js    # ì‹ ê·œ: agents.db ê´€ë¦¬
â””â”€â”€ routes/
    â”œâ”€â”€ api.js              # ê¸°ì¡´: tasks API
    â””â”€â”€ agents-api.js       # ì‹ ê·œ: agents API
```

#### ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸ ë¶„ë¦¬
```javascript
// ê¸°ì¡´ tasks API (ë³€ê²½ ì—†ìŒ)
GET  /api/tasks
POST /api/tasks
PUT  /api/tasks/:id
DELETE /api/tasks/:id

// ì‹ ê·œ agents API
GET    /api/agents                    # ì—ì´ì „íŠ¸ ëª©ë¡
POST   /api/agents                    # ì—ì´ì „íŠ¸ ìƒì„±
PUT    /api/agents/:id               # ì—ì´ì „íŠ¸ ìˆ˜ì •
DELETE /api/agents/:id               # ì—ì´ì „íŠ¸ ì‚­ì œ

GET    /api/agents/:id/instances     # íŠ¹ì • ì—ì´ì „íŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ ëª©ë¡
POST   /api/agents/:id/instances     # ìƒˆ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
PUT    /api/instances/:id            # ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ ì—…ë°ì´íŠ¸
DELETE /api/instances/:id            # ì¸ìŠ¤í„´ìŠ¤ ì¢…ë£Œ/ì‚­ì œ

GET    /api/instances/:id/messages   # ì¸ìŠ¤í„´ìŠ¤ ë©”ì‹œì§€ ëª©ë¡
POST   /api/instances/:id/messages   # ë©”ì‹œì§€ ì „ì†¡
```

- **Multi-Session WebSocket**: ì„¸ì…˜ ID ê¸°ë°˜ ì±„ë„ ë¶„ë¦¬
- **Multi-Database Connection**: tasks.db + agents.db ë™ì‹œ ê´€ë¦¬
- **Domain-Specific APIs**: ê° ë„ë©”ì¸ë³„ ë…ë¦½ì ì¸ API êµ¬ì¡°

### Phase 3: Frontend UI Overhaul
- **Multi-Agent Dashboard**: ì—ì´ì „íŠ¸ë³„ ìƒíƒœ ëª¨ë‹ˆí„°ë§
- **Tab-based Interface**: ì—ì´ì „íŠ¸ ê°„ ì „í™˜ UI
- **Independent Terminal Views**: ê° ì—ì´ì „íŠ¸ì˜ ë…ë¦½ì ì¸ í„°ë¯¸ë„ ë·°

### Phase 4: Session Orchestration System
- **Dynamic PTY Creation**: ìš”ì²­ ì‹œ ìƒˆ PTY í”„ë¡œì„¸ìŠ¤ ìƒì„±
- **Session Routing**: ì„¸ì…˜ ID ê¸°ë°˜ ë©”ì‹œì§€ ë¼ìš°íŒ…
- **Resource Management**: PTY í”„ë¡œì„¸ìŠ¤ ìƒëª…ì£¼ê¸° ê´€ë¦¬

## Updated Target Architecture Vision

### ğŸ—ï¸ Multi-Database Architecture
```
docs/
â”œâ”€â”€ tasks.db          # ì—…ë¬´ ëª©ë¡ ì „ìš© (ê¸°ì¡´ ìœ ì§€)
â””â”€â”€ agents.db         # ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ê´€ë¦¬ ì „ìš© (ì‹ ê·œ)
```

#### Database Relationship Design
```
agents â”€â”€â†’ agent_instances â”€â”€â†’ agent_messages
  â†“              â†“                    â†“
1:N            1:N                  1:N
```

### ğŸ”— Database Relations & Integrity
- **agents** â†’ **agent_instances**: 1:N (í•œ ì—ì´ì „íŠ¸ê°€ ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ì‹¤í–‰ ê°€ëŠ¥)
- **agent_instances** â†’ **agent_messages**: 1:N (í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ì—¬ëŸ¬ ë©”ì‹œì§€ í¬í•¨)
- **Cascade Deletion**: ì—ì´ì „íŠ¸ ì‚­ì œ ì‹œ ê´€ë ¨ ì¸ìŠ¤í„´ìŠ¤ì™€ ë©”ì‹œì§€ ëª¨ë‘ ì‚­ì œ
- **Referential Integrity**: FK ì œì•½ ì¡°ê±´ìœ¼ë¡œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥

### Architecture Benefits
#### âœ… ë‹¨ì¼ ì±…ì„ ì›ì¹™ (Single Responsibility Principle)
- **tasks.db**: ì—…ë¬´ ëª©ë¡ ê´€ë¦¬ ì „ë‹´
- **agents.db**: ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ê´€ë¦¬ ì „ë‹´
- ê° ë°ì´í„°ë² ì´ìŠ¤ê°€ ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„ ìœ ì§€

#### ğŸš€ í™•ì¥ì„± ë° ìœ ì§€ë³´ìˆ˜ì„±
- **ë…ë¦½ì  ìŠ¤í‚¤ë§ˆ ì§„í™”**: ê° DBê°€ ë…ë¦½ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥
- **ì•ˆì •ì„±**: ê¸°ì¡´ tasks.db êµ¬ì¡° 100% ë³´ì¡´
- **ëª¨ë“ˆì„±**: ë„ë©”ì¸ë³„ë¡œ ë¶„ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤
- **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ê° ë„ë©”ì¸ë³„ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

#### ğŸ’¡ í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±
- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜**: ê° DBë¥¼ ë³„ë„ ì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬ ìš©ì´
- **ì„±ëŠ¥ ìµœì í™”**: ë„ë©”ì¸ë³„ ìµœì í™” ì „ëµ ì ìš© ê°€ëŠ¥
- **ë°±ì—… ë° ë³µêµ¬**: ë„ë©”ì¸ë³„ ë…ë¦½ì ì¸ ë°±ì—… ì •ì±…

### Expected System Improvements
- âœ… **Multi-Project Support**: ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ ë™ì‹œ ì‘ì—… ê°€ëŠ¥
- âœ… **Independent Execution**: ì—ì´ì „íŠ¸ë³„ ë…ë¦½ì ì¸ ì‹¤í–‰ í™˜ê²½
- âœ… **Centralized Monitoring**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ìƒíƒœ ê´€ë¦¬ ë° ëª¨ë‹ˆí„°ë§
- âœ… **Intuitive Multi-Agent UI**: ì§ê´€ì ì¸ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- âœ… **Scalable Architecture**: ë™ì  ì—ì´ì „íŠ¸ ì¶”ê°€/ì œê±° ì§€ì›
- âœ… **Resource Isolation**: ì—ì´ì „íŠ¸ ê°„ ì™„ì „í•œ ë¦¬ì†ŒìŠ¤ ê²©ë¦¬

### Updated Implementation Roadmap
1. **Phase 1**: Database Separation & Extension â³ (1-2 days)
   - [ ] `agents.db` ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
   - [ ] `server/db/agents-sqlite.js` ëª¨ë“ˆ êµ¬í˜„
   - [ ] í…Œì´ë¸” ê´€ê³„ ë° ì¸ë±ìŠ¤ ì„¤ì •

2. **Phase 2**: Backend API Extension â³ (3-4 days) 
   - [ ] `server/routes/agents-api.js` êµ¬í˜„
   - [ ] Multi-database ì—°ê²° ê´€ë¦¬ (tasks.db + agents.db)
   - [ ] WebSocket ì´ë²¤íŠ¸ë¥¼ ì—ì´ì „íŠ¸ë³„ë¡œ ë¶„ë¦¬

3. **Phase 3**: Frontend UI Redesign â³ (5-7 days)
   - [ ] Multi-Agent Dashboard UI
   - [ ] ì—ì´ì „íŠ¸ë³„ ë…ë¦½ì ì¸ í„°ë¯¸ë„ ë·°

4. **Phase 4**: Session Orchestration â³ (3-5 days)
   - [ ] ì—ì´ì „íŠ¸ë³„ PTY ì„¸ì…˜ ê´€ë¦¬
   - [ ] ì„¸ì…˜ ë¼ìš°íŒ… ë° ê²©ë¦¬

**Total Estimated Timeline**: 2-3 weeks for complete Multi-Agent System

## Discovered Patterns

### Omnara Success Patterns
- **Stateful Agent Management**: ìƒíƒœ ê¸°ë°˜ ì—ì´ì „íŠ¸ ì œì–´ì˜ íš¨ê³¼ì„±
- **Real-time Communication**: SSEë¥¼ í†µí•œ ì•ˆì •ì ì¸ ì‹¤ì‹œê°„ í†µì‹ 
- **Centralized Monitoring**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ëª¨ë‹ˆí„°ë§ì˜ ì‚¬ìš©ì„± ê°œì„  íš¨ê³¼

### AreYouJ Strength Patterns
- **Direct PTY Control**: í„°ë¯¸ë„ ì§ì ‘ ì œì–´ì˜ ì•ˆì •ì„±ê³¼ ì„±ëŠ¥
- **Local SQLite**: ë¡œì»¬ í™˜ê²½ì—ì„œì˜ ë¹ ë¥¸ ì‘ë‹µì„±
- **WebSocket Efficiency**: ì–‘ë°©í–¥ í†µì‹ ì˜ íš¨ìœ¨ì„±

## Technical Challenges

### Session Isolation Challenge
- **Problem**: ì—ì´ì „íŠ¸ë³„ ë…ë¦½ì ì¸ í™˜ê²½ ê²©ë¦¬
- **Complexity**: PTY í”„ë¡œì„¸ìŠ¤ê°„ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬
- **Solution Direction**: Docker ì»¨í…Œì´ë„ˆ ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™œìš©

### State Synchronization Challenge
- **Problem**: ë‹¤ì¤‘ ì„¸ì…˜ì˜ ìƒíƒœ ë™ê¸°í™”
- **Risk**: Race condition ë° ë°ì´í„° ì¼ê´€ì„± ë¬¸ì œ
- **Mitigation**: Lock ê¸°ë°˜ ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ í•„ìš”

## Code References

### Key Implementation Files
- Current: `server/index.js:45-120` - WebSocket í•¸ë“¤ëŸ¬
- Target: `claude_pty_wrapper.py` - ë‹¤ì¤‘ ì„¸ì…˜ ì§€ì›ìœ¼ë¡œ í™•ì¥ í•„ìš”
- Database: `docs/tasks.db` - ìŠ¤í‚¤ë§ˆ í™•ì¥ ëŒ€ìƒ

### Omnara Reference Points
- `claude_wrapper_v3.py` - ì–‘ë°©í–¥ Claude í†µì‹  ì°¸ì¡°
- Database models - PostgreSQL ìŠ¤í‚¤ë§ˆ SQLite ë³€í™˜ ì°¸ì¡°

## Learning Notes

### Multi-Agent System Design Principles
- **Isolation**: ê° ì—ì´ì „íŠ¸ëŠ” ë…ë¦½ì ì¸ ì‹¤í–‰ í™˜ê²½ í•„ìš”
- **Scalability**: ë™ì  ì—ì´ì „íŠ¸ ì¶”ê°€/ì œê±° ì§€ì›
- **Monitoring**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ìƒíƒœ ëª¨ë‹ˆí„°ë§ í•„ìˆ˜
- **Communication**: ì‹¤ì‹œê°„ ì–‘ë°©í–¥ í†µì‹  ì±„ë„ êµ¬ì¶•

### Implementation Complexity Assessment
- **High**: Session isolation and resource management
- **Medium**: Database schema evolution and API extension
- **Low**: Frontend UI adaptation (ê¸°ì¡´ ì»´í¬ë„ŒíŠ¸ ì¬ì‚¬ìš© ê°€ëŠ¥)

## Next Session Focus

### Immediate Tasks (Next 1-2 Sessions)
- [ ] **ìƒˆ `agents.db` ìƒì„± ìŠ¤í¬ë¦½íŠ¸** ì‘ì„±
- [ ] **Multi-database ì—°ê²°** ê´€ë¦¬ ëª¨ë“ˆ êµ¬í˜„
- [ ] **ë„ë©”ì¸ë³„ API ë¼ìš°í„°** ë¶„ë¦¬ (`agents-api.js`)
- [ ] **WebSocket ì´ë²¤íŠ¸** ì—ì´ì „íŠ¸ë³„ ë¶„ë¦¬ ì„¤ê³„

### Short-term Goals (1 Week)
- [ ] Phase 1 ì™„ë£Œ: **Database separation** (`tasks.db` + `agents.db`)
- [ ] **Dual-database** CRUD API êµ¬í˜„
- [ ] í”„ë¡ íŠ¸ì—”ë“œ **ì—ì´ì „íŠ¸ ìƒì„±/ê´€ë¦¬ UI** í”„ë¡œí† íƒ€ì…

### Medium-term Vision (1 Month)
- [ ] ì™„ì „í•œ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œ ë™ì‘
- [ ] ì„±ëŠ¥ ìµœì í™” ë° ì•ˆì •ì„± ê²€ì¦
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ê¸°ë°˜ UX ê°œì„ 

## Questions for Next Session

1. **Database Connection Pool**: `tasks.db`ì™€ `agents.db` ë™ì‹œ ì—°ê²° ì‹œ connection pooling ì „ëµì€?
2. **Cross-Database Queries**: ì—ì´ì „íŠ¸ì™€ íƒœìŠ¤í¬ ê°„ì˜ ì—°ê´€ê´€ê³„ê°€ í•„ìš”í•œ ê²½ìš° ì²˜ë¦¬ ë°©ë²•ì€?
3. **Migration Strategy**: ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„¤ì •ì„ `agents.db`ë¡œ ì–´ë–»ê²Œ ì´ì „í•  ê²ƒì¸ê°€?
4. **Resource Limits**: ë™ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì—ì´ì „íŠ¸ ìˆ˜ì˜ ì œí•œì€ ì–´ë–»ê²Œ ì„¤ì •í•  ê²ƒì¸ê°€?

## Key Insights

### Strategic Direction
ğŸ¯ **Database Domain Separation First**: ì•„í‚¤í…ì²˜ì˜ ê¸°ë°˜ì„ ì˜¬ë°”ë¥´ê²Œ ì„¤ê³„í•˜ëŠ” ê²ƒì´ í•µì‹¬. `tasks.db`ì™€ `agents.db`ì˜ ëª…í™•í•œ ë¶„ë¦¬ë¥¼ í†µí•´ **ë‹¨ì¼ ì±…ì„ ì›ì¹™**ì„ ì¤€ìˆ˜í•˜ê³ , í–¥í›„ í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì„ í™•ë³´.

AreYouJëŠ” ë‹¨ì¼ ì„¸ì…˜ì˜ ì•ˆì •ì„±ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹¤ì¤‘ ì—ì´ì „íŠ¸ë¡œ í™•ì¥í•˜ëŠ” **ì ì§„ì  ì§„í™”** ì „ëµì´ ì í•©. í•˜ì§€ë§Œ **ì˜¬ë°”ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ ì•„í‚¤í…ì²˜**ë¥¼ ë¨¼ì € êµ¬ì¶•í•œ í›„ ê¸°ëŠ¥ì„ í™•ì¥í•´ì•¼ í•¨.

### Success Metrics
- **Concurrent Sessions**: 3-5ê°œ ì—ì´ì „íŠ¸ ë™ì‹œ ì‹¤í–‰ ì•ˆì •ì„±
- **Response Time**: ì—ì´ì „íŠ¸ ê°„ ì „í™˜ ì‹œ 1ì´ˆ ì´ë‚´ ì‘ë‹µ
- **Resource Usage**: ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì—ì´ì „íŠ¸ë‹¹ 100MB ì´í•˜ ìœ ì§€